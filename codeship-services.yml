testweb:
  build: .
  depends_on:
    - web
    - firefox
    - chrome-debug
  entrypoint: ["./bin/test.sh"]

web:
  build: .
  command: python manage.py runserver 0.0.0.0:8000
  ports:
    - "8000"

firefox:
  image: selenium/node-firefox:3.14.0-gallium
  volumes:
    - /dev/shm:/dev/shm
  depends_on:
    - hub
  environment:
    HUB_HOST: hub

chrome-debug:
  image: selenium/node-chrome-debug:3.14.0-gallium
  volumes:
    - /dev/shm:/dev/shm
  depends_on:
    - hub
  environment:
    HUB_HOST: hub
    VNC_NO_PASSWORD: 1

hub:
  image: selenium/hub:3.14.0-gallium
